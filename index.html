<!DOCTYPE html>
<html>
<head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
 <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">



    <title>Assignment 7</title>
    <style>
        body{
            font-family: 'Quicksand';
            text-align: center;
        }
        h3{
            font-family: 'Quicksand';
            text-align: center;
            font-size: 14px;
            text-decoration: underline;
            text-transform: uppercase;
        }
        th, td, p, input {
            font-size: 14px;
        }
        table, th, td 
        {
            border: solid 1px #DDD;
            border-collapse: collapse;
            padding: 2px 3px;
            text-align: center;
            width: 70%;
            margin-left: 15%;
            margin-right: 15%;
        }
        label{
            font-size: 12px; 
            text-transform: uppercase;
            font-weight: bold;
        }
        th {
            font-weight: bold;
            font-size: 12px;
            text-transform: uppercase;
        }
        button, select{
            font-family: 'Quicksand';
        }
    </style>
</head>
<body>
    <h3> SERIALIZED DATA: </h3>
    <p id = "SerializedData"></p>
    <h3> SETLIST: </h3>
    <p id ="showData"></p>

    <!--The SELECT element.-->
    <label for ="selectGenre"> Choose a Genre: </label>
    <select id="selectGenre"></select>
    <button type = "submit" onclick =  "show()"> Search by Genre! </button>
    <p id="display"></p>
  
</form>
<p id = "showGenre"></p>
    <script>
    function CreateTable() {
        //JSON object (PART 1)
        var myList = [
            {
                "Title": "Kiss Kiss",
                "Artist": "Chris Brown",
                "Genre": "R&B",
                "Year": "2002"
            },
            {
                "Title": "That's On Me",
                "Artist": "Yella Beezy",
                "Genre": "Rap",
                "Year": "2018"
            },
            {
                "Title": "LUV",
                "Artist": "Tory Lanez",
                "Genre": "Hip-Hop",
                "Year": "2016"
            },
              {
                "Title": "The Light",
                "Artist": "Jeremih",
                "Genre": "Soul",
                "Year": "2018"
            },
              {
                "Title": "Grass Ain't Greener",
                "Artist": "Chris Brown",
                "Genre": "R&B",
                "Year": "2018"
            },
               {
                "Title": "OTW",
                "Artist": "Khalid",
                "Genre": "Pop",
                "Year": "2018"
            },
               {
                "Title": "3 Nights",
                "Artist": "Dominic Fike",
                "Genre": "Alternative",
                "Year": "2018"
            },
               {
                "Title": "Nightmare",
                "Artist": "Halsey",
                "Genre": "Alternative",
                "Year": "2019"
            },
               {
                "Title": "Paradise",
                "Artist": "Halsey",
                "Genre": "Alternative",
                "Year": "2019"
            },
               {
                "Title": "Truth Hurts",
                "Artist": "Lizzo",
                "Genre": "Pop",
                "Year": "2019"
            },
        ]

    //SERIALIZES DATA (PART 2)
    var jsonString = JSON.stringify(myList);
    document.getElementById('SerializedData').innerHTML = jsonString;


        // gets value for header('Title', 'Artist', 'Genre' and 'Year')
        var col = [];
        for (var i = 0; i < myList.length; i++) {
            for (var key in myList[i]) {
                if (col.indexOf(key) === -1) {
                    col.push(key);
                }
            }
        }

        // creates table (PART 3)
        var table = document.createElement("table");


        var tr = table.insertRow(-1); //rows
        for (var i = 0; i < col.length; i++) {
            var th = document.createElement("th"); //header
            th.innerHTML = col[i];
            tr.appendChild(th);
        }

        //add json data to table
        for (var i = 0; i < myList.length; i++) {

            tr = table.insertRow(-1);

            for (var j = 0; j < col.length; j++) {
                var tabCell = tr.insertCell(-1);
                tabCell.innerHTML = myList[i][col[j]];
            }
        }

        // add table to page
        var divContainer = document.getElementById("showData");
        divContainer.innerHTML = "";
        divContainer.appendChild(table);

        //populates select dropdown
        var ele = document.getElementById("selectGenre");
                ele.innerHTML = ele.innerHTML + 
                '<option value = "Alternative"> Alternative </option>' +
                '<option value = "R&B"> R&B </option>' +
                '<option value = "Pop"> Pop </option>' +
                '<option value = "Soul"> Soul </option>' +
                '<option value = "Rap"> Rap </option>' + 
                '<option value = "Hip-Hop"> Hip-Hop </option>'
                ;
}
    function show(){
           var myList = [
            {
                "Title": " Kiss Kiss",
                "Artist": "Chris Brown",
                "Genre": "R&B",
                "Year": "2002"
            },
            {
                "Title": " That's On Me",
                "Artist": "Yella Beezy",
                "Genre": "Rap",
                "Year": "2018"
            },
            {
                "Title": " LUV",
                "Artist": "Tory Lanez",
                "Genre": "Hip-Hop",
                "Year": "2016"
            },
              {
                "Title": " The Light",
                "Artist": "Jeremih",
                "Genre": "Soul",
                "Year": "2018"
            },
              {
                "Title": " Grass Ain't Greener",
                "Artist": "Chris Brown",
                "Genre": "R&B",
                "Year": "2018"
            },
               {
                "Title": " OTW",
                "Artist": "Khalid",
                "Genre": "Pop",
                "Year": "2018"
            },
               {
                "Title": " 3 Nights",
                "Artist": "Dominic Fike",
                "Genre": "Alternative",
                "Year": "2018"
            },
               {
                "Title": " Nightmare",
                "Artist": "Halsey",
                "Genre": "Alternative",
                "Year": "2019"
            },
               {
                "Title": " Paradise",
                "Artist": "Halsey",
                "Genre": "Alternative",
                "Year": "2019"
            },
               {
                "Title": " Truth Hurts",
                "Artist": "Lizzo",
                "Genre": "Pop",
                "Year": "2019"
            },
        ]
        //get selected index
        var ele = document.getElementById("selectGenre");
        var selectedGenre = ele.options[ele.selectedIndex].text;
        var songs = [];
        var j = 0; //tracks place in songs array
        for (i = 0; i < myList.length; i++){
                if (selectedGenre == myList[i].Genre)
                {
                    songs[j] = myList[i].Title;
                    j++;
                    //console.log(myList[i].Title);
                }     
        }
        //console.log(songs);

        //array to string
        var songsString = songs.toString();
        var display = document.getElementById('display');
        display.innerHTML = 'Selected Genre: <b>' + ele.options[ele.selectedIndex].text + '</b></br>' + 'Songs: <b>' + songsString + '</b>';
    }


    window.onload = CreateTable();
</script>


</body>


</html>
